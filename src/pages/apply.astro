---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
---

<Layout title="Postula al Ecosistema | LanzaSaaS">
    <Header />

    <main>
        <section class="section apply-section">
            <div class="bg-gradient-apply"></div>

            <div class="container">
                <div class="form-wrapper">
                    <div class="text-center mb-8">
                        <span class="badge-apply">Únete al Batch</span>
                        <h1 class="form-title">Postula a LanzaSaaS</h1>
                        <p class="form-desc">
                            Cuéntanos quién eres. Buscamos compromiso, no
                            currículums perfectos.
                        </p>
                    </div>

                    <div
                        id="success-message"
                        class="success-box"
                        style="display: none;"
                    >
                        <span class="material-symbols-outlined icon-success"
                            >check_circle</span
                        >
                        <h3>¡Postulación Recibida!</h3>
                        <p>
                            Hemos recibido tus datos. Revisaremos tu perfil y te
                            contactaremos en las próximas 48 horas.
                        </p>
                        <a href="/" class="btn btn-outline mt-4"
                            >Volver al Inicio</a
                        >
                    </div>

                    <!-- Formulario -->
                    <form id="application-form" class="app-form">
                        <div class="form-group">
                            <label class="group-label"
                                >¿A qué rol aplicas?</label
                            >
                            <div class="role-selector">
                                <label class="role-option">
                                    <input
                                        type="radio"
                                        name="role"
                                        value="founder"
                                        required
                                    />
                                    <div class="role-card">
                                        <span class="material-symbols-outlined"
                                            >psychology</span
                                        >
                                        <span>Founder</span>
                                    </div>
                                </label>
                                <label class="role-option">
                                    <input
                                        type="radio"
                                        name="role"
                                        value="tech"
                                    />
                                    <div class="role-card">
                                        <span class="material-symbols-outlined"
                                            >code</span
                                        >
                                        <span>Técnico</span>
                                    </div>
                                </label>
                                <label class="role-option">
                                    <input
                                        type="radio"
                                        name="role"
                                        value="marketer"
                                    />
                                    <div class="role-card">
                                        <span class="material-symbols-outlined"
                                            >campaign</span
                                        >
                                        <span>Marketer</span>
                                    </div>
                                </label>
                                <label class="role-option">
                                    <input
                                        type="radio"
                                        name="role"
                                        value="talent"
                                    />
                                    <div class="role-card">
                                        <span class="material-symbols-outlined"
                                            >school</span
                                        >
                                        <span>Talent</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="input-group">
                                <label for="fullname">Nombre Completo</label>
                                <input
                                    type="text"
                                    id="fullname"
                                    name="fullname"
                                    placeholder="Ej. Ana García"
                                    required
                                />
                            </div>
                            <div class="input-group">
                                <label for="email">Email</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    placeholder="ana@ejemplo.com"
                                    required
                                />
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="input-group">
                                <label for="linkedin">Perfil de LinkedIn</label>
                                <input
                                    type="url"
                                    id="linkedin"
                                    name="linkedin"
                                    placeholder="https://linkedin.com/in/..."
                                    required
                                />
                            </div>
                            <div class="input-group">
                                <label for="portfolio"
                                    >Portfolio / GitHub (Opcional)</label
                                >
                                <input
                                    type="url"
                                    id="portfolio"
                                    name="portfolio"
                                    placeholder="https://github.com/..."
                                />
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="motivation"
                                >¿Por qué quieres entrar a LanzaSaaS?</label
                            >
                            <textarea
                                id="motivation"
                                name="motivation"
                                rows="4"
                                placeholder="Cuéntanos brevemente tu experiencia y qué buscas construir..."
                                required></textarea>
                        </div>

                        <div class="form-footer">
                            <button
                                type="submit"
                                id="submit-btn"
                                class="btn btn-primary btn-block"
                            >
                                <span class="btn-text">Enviar Postulación</span>
                                <span class="material-symbols-outlined btn-icon"
                                    >send</span
                                >
                            </button>
                            <p class="disclaimer">
                                Al enviar este formulario aceptas nuestra
                                política de privacidad.
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <Footer />
</Layout>

<script is:inline>
    const form = document.getElementById("application-form");
    const successMsg = document.getElementById("success-message");
    const submitBtn = document.getElementById("submit-btn");

    if (form && submitBtn && successMsg) {
        form.addEventListener("submit", (e) => {
            e.preventDefault();

            const originalContent = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = `Enviando... <span class="material-symbols-outlined spin">progress_activity</span>`;
            submitBtn.style.opacity = "0.8";

            setTimeout(() => {
                form.style.display = "none";
                successMsg.style.display = "flex";
                successMsg.classList.add("fade-in");

                window.scrollTo({ top: 0, behavior: "smooth" });
            }, 2000);
        });
    }
</script>

<style>
    .apply-section {
        padding: 4rem 1.5rem;
        min-height: 90vh;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .bg-gradient-apply {
        position: absolute;
        inset: 0;
        background: radial-gradient(
            circle at top,
            rgba(16, 185, 129, 0.1),
            transparent 50%
        );
        pointer-events: none;
    }

    .form-wrapper {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        padding: 2rem;
        border-radius: var(--radius-xl);
        width: 100%;
        max-width: 700px;
        margin: 0 auto;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        position: relative;
        z-index: 10;
    }

    @media (min-width: 768px) {
        .form-wrapper {
            padding: 3rem;
        }
    }

    .badge-apply {
        display: inline-block;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        color: var(--color-primary);
        border: 1px solid rgba(16, 185, 129, 0.3);
        padding: 0.3rem 0.8rem;
        border-radius: 99px;
        margin-bottom: 1rem;
    }
    .form-title {
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }
    .form-desc {
        color: var(--text-muted);
        font-size: 0.95rem;
    }

    .app-form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .grid-2 {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    @media (min-width: 640px) {
        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }
    }

    .input-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .group-label,
    label {
        font-size: 0.9rem;
        font-weight: 500;
        color: var(--text-gray);
    }

    input[type="text"],
    input[type="email"],
    input[type="url"],
    textarea {
        background: #18181b;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: 0.8rem 1rem;
        color: white;
        font-family: var(--font-body);
        font-size: 0.95rem;
        transition: all 0.2s;
    }

    input:focus,
    textarea:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    .role-selector {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    @media (min-width: 640px) {
        .role-selector {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    .role-option input {
        display: none;
    }

    .role-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        background: #18181b;
        border: 1px solid var(--border-color);
        padding: 1rem 0.5rem;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.2s;
        text-align: center;
    }

    .role-card span:first-child {
        font-size: 1.5rem;
        color: var(--text-muted);
        transition: 0.2s;
    }
    .role-card span:last-child {
        font-size: 0.85rem;
        font-weight: 700;
        color: var(--text-gray);
    }

    .role-option:hover .role-card {
        border-color: #52525b;
        background: #27272a;
    }

    .role-option input:checked + .role-card {
        background: rgba(16, 185, 129, 0.1);
        border-color: var(--color-primary);
        box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
    }
    .role-option input:checked + .role-card span:first-child {
        color: var(--color-primary);
    }
    .role-option input:checked + .role-card span:last-child {
        color: white;
    }

    .form-footer {
        margin-top: 1rem;
    }
    .btn-block {
        width: 100%;
        justify-content: center;
        font-size: 1rem;
        padding: 1rem;
    }
    .disclaimer {
        font-size: 0.75rem;
        color: #52525b;
        text-align: center;
        margin-top: 1rem;
    }

    .success-box {
        text-align: center;
        padding: 3rem 1rem;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }
    .icon-success {
        font-size: 4rem;
        color: var(--color-primary);
        margin-bottom: 0.5rem;
    }
    .success-box h3 {
        font-size: 1.5rem;
        color: white;
    }
    .success-box p {
        color: var(--text-gray);
        max-width: 400px;
        margin: 0 auto;
    }
    .mt-4 {
        margin-top: 2rem;
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .spin {
        animation: spin 1s linear infinite;
        margin-left: 0.5rem;
    }
    @keyframes spin {
        100% {
            transform: rotate(360deg);
        }
    }
</style>
